<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#111a22"
    tools:context=".Dashboard">

    <!--
        THE FIX:
        1. `android:clipToPadding="false"`: This is crucial. It allows the content inside the
           ScrollView to scroll into the padding area, which we will define below.
        2. `android:paddingBottom="100dp"`: This adds a large empty space at the very end of the
           scrollable area. Now, when you scroll to the bottom, the "Clinician Notes" have
           plenty of room to move up and appear above your Activity's Bottom Navigation Bar.
    -->
    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipToPadding="false"
        android:paddingBottom="100dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:paddingBottom="16dp"> <!-- This padding just adds a final bit of visual space -->

            <!-- Toolbar / Header -->
            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="16dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:text="Cognitive Health"
                    android:textColor="@android:color/white"
                    android:textSize="18sp"
                    android:textStyle="bold" />

                <ImageButton
                    android:id="@+id/settings_button"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_alignParentEnd="true"
                    android:layout_centerVertical="true"
                    android:background="@android:color/transparent"
                    app:tint="@android:color/white"
                    tools:ignore="ContentDescription" />

            </RelativeLayout>

            <!-- Profile Section -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:orientation="vertical"
                android:padding="16dp">

                <androidx.cardview.widget.CardView
                    android:layout_width="128dp"
                    android:layout_height="128dp"
                    app:cardCornerRadius="64dp"
                    app:cardElevation="0dp">

                    <ImageView
                        android:id="@+id/profile_image"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:scaleType="centerCrop"
                        tools:src="@tools:sample/avatars" />
                </androidx.cardview.widget.CardView>

                <TextView
                    android:id="@+id/profile_name"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="16dp"
                    android:text="Sophia Clark"
                    android:textColor="@android:color/white"
                    android:textSize="22sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/profile_age"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Age 72"
                    android:textColor="#93adc8"
                    android:textSize="16sp" />

            </LinearLayout>

            <!-- Cognitive Score Card -->
            <androidx.cardview.widget.CardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginHorizontal="16dp"
                app:cardBackgroundColor="#243647"
                app:cardCornerRadius="8dp"
                app:cardElevation="0dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="24dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Cognitive Score"
                        android:textColor="@android:color/white"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/cognitive_score"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="85"
                        android:textColor="@android:color/white"
                        android:textSize="24sp"
                        android:textStyle="bold" />
                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Cognitive Trend Section -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="16dp"
                android:paddingTop="24dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Cognitive Trend"
                    android:textColor="@android:color/white"
                    android:textSize="16sp" />

                <TextView
                    android:id="@+id/cognitive_trend"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="+5%"
                    android:textColor="@android:color/white"
                    android:textSize="32sp"
                    android:textStyle="bold" />

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Last 3 Months"
                        android:textColor="#93adc8"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/cognitive_trend_change"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="4dp"
                        android:text="+5%"
                        android:textColor="#0bda5b"
                        android:textSize="16sp"
                        android:textStyle="bold" />
                </LinearLayout>

                <!-- Chart Placeholder -->
                <ImageView
                    android:id="@+id/chart_image"
                    android:layout_width="match_parent"
                    android:layout_height="148dp"
                    android:layout_marginTop="16dp"
                    android:scaleType="fitXY"
                    tools:src="@tools:sample/backgrounds/scenic"
                    tools:ignore="ContentDescription" />

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="4dp"
                    android:orientation="horizontal">

                    <TextView
                        style="@style/MonthLabel"
                        android:text="Jan" />
                    <TextView
                        style="@style/MonthLabel"
                        android:text="Feb" />
                    <TextView
                        style="@style/MonthLabel"
                        android:text="Mar" />
                </LinearLayout>
            </LinearLayout>

            <!-- Clinician Notes -->
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Clinician Notes"
                android:textColor="@android:color/white"
                android:textSize="22sp"
                android:textStyle="bold"
                android:layout_marginTop="20dp"
                android:paddingHorizontal="16dp"/>

            <TextView
                android:id="@+id/clinician_notes"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Dr. Ramirez: Sophia's cognitive score is stable and shows a slight improvement over the last three months. Continue with the current lifestyle and cognitive exercises."
                android:textColor="@android:color/white"
                android:textSize="16sp"
                android:lineSpacingExtra="4dp"
                android:paddingHorizontal="16dp"
                android:paddingTop="4dp"/>

        </LinearLayout>

    </androidx.core.widget.NestedScrollView>

</RelativeLayout>